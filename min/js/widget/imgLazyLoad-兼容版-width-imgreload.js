!function(t){var i=function(i){this.settings=$.extend({threshold:0,container:t,urlName:"data-url",placeHolder:"",eventName:"scrollStop",innerScroll:!1,isVertical:!0,classSelector:"img",reloadTipImg:""},i),this.pedding=[],this.init()};i.prototype={contructor:i,init:function(){var t=this.settings;if(t.placeHolder.length>0){var i=new Image;i.src=t.placeHolder}if(t.reloadTipImg.length>0){var e=new Image;e.src=t.reloadTipImg}this.initElem(),this.initEvent()},initElem:function(){var t=this.settings,i=this,e=null;e=t.classSelector.length>0?t.classSelector:"img",$(e).each(function(){var e=$(this).attr(t.urlName);e&&e.length>0&&(i.pedding.push(this),t.placeHolder.length>0&&$(this).attr("src",t.placeHolder))})},lazyLoadPic:function(){for(var i=$(t).height(),e=this,n=this.settings,r=$(t).scrollTop(),a=e.pedding,s=null,o=0;o<a.length;o++){a[o];var l=$(a[o]);l.is("img")?l.attr("data-url")&&(s=l.offset().top,s-n.threshold<=i+r&&e.detect()):l.attr("data-url")&&("none"==l.css("background-image")&&l.css("background-image","url("+n.placeholder+")"),s=l.offset().top,s-n.threshold<=i+r&&(l.css("background-image","url("+l.attr("data-url")+")"),l.removeAttr("data-url")))}},initEvent:function(){{var i=this;this.settings}$(function(){i.detect(),setTimeout(function(){i.detect()},500)}),$(t).on("scroll",function(){i.lazyLoadPic()})},load:function(t){var i=$(t),e={},n=i,r=this.settings,a=$(t).is("img"),s="";a||($.each(i.get(0).attributes,function(){~this.name.indexOf("data-")&&(e[this.name]=this.value)}),n=$("<img />").attr(e)),s=i.attr(r.urlName);var o=function(t){var i=new Image;i.src=t,i.onload=function(){s&&""!==s&&(n.attr("src",s),n.css({opacity:1})),n.off("click")},i.onerror=function(){n.attr("src",r.reloadTipImg);var t=s;n.off("click"),n.on("click",function(i){i.preventDefault(),i.stopPropagation(),$(this).attr("src",r.placeHolder),o(t)})}};o(s)},detect:function(){var t,i,e,n,r=this,a=[].splice;for(t=r.pedding.length;t--;)i=$(n=r.pedding[t]),e=i.offset(),$(n).css({"-webkit-transition":"all 350ms ease"}),r.isShow(e)&&(a.call(r.pedding,t,1),r.load(n))},isShow:function(i){var e=this.settings,n=$(e.container),r=e.isVertical,a=$.isWindow(n.get(0)),s={win:[r?"scrollY":"scrollX",r?"innerHeight":"innerWidth"],img:[r?"top":"left",r?"height":"width"]},o=a?t:n.offset(),l=o[s.win[0]],c=o[s.win[1]],d=!0;return d=l>=i[s.img[0]]-e.threshold-c&&l<=i[s.img[0]]+i[s.img[1]]?!0:!1}},F.addWidget("imgLazyObject",i)}(window);